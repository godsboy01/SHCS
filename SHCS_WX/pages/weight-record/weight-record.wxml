<!--pages/weight-record/weight-record.wxml-->
<view class="container">
  <!-- 导航栏 -->
  <view class="nav-bar" style="padding-top: {{systemInfo.statusBarHeight}}px">
    <view class="back-btn" bindtap="goBack">
      <text class="iconfont icon-back">←</text>
      <text>返回</text>
    </view>
    <view class="title">体重记录</view>
  </view>

  <!-- 体重和BMI趋势图 -->
  <view class="chart-container" style="margin-top: {{systemInfo.statusBarHeight + 44}}px">
    <ec-canvas id="weightChart" canvas-id="weightChart" ec="{{ weightEc }}"></ec-canvas>
  </view>

  <!-- BMI状态提示 -->
  <view class="bmi-status {{bmiClass}}">
    <view class="bmi-title">BMI 状态</view>
    <view class="bmi-value">{{latestBMI}}</view>
    <view class="bmi-desc">{{bmiDescription}}</view>
  </view>

  <!-- 最新记录 -->
  <view class="latest-record">
    <view class="record-title">最新记录</view>
    <view class="record-item">
      <text>体重</text>
      <text>{{latestWeight}} kg</text>
    </view>
    <view class="record-item">
      <text>身高</text>
      <text>{{latestHeight}} cm</text>
    </view>
    <view class="record-item">
      <text>记录时间</text>
      <text>{{latestTime}}</text>
    </view>
  </view>

  <!-- 手动录入表单 -->
  <view class="input-form">
    <view class="form-title">手动录入</view>
    <view class="form-item">
      <text>体重 (kg)</text>
      <input type="digit" value="{{inputWeight}}" placeholder="请输入体重" bindinput="onWeightInput"/>
    </view>
    <view class="form-item">
      <text>身高 (cm)</text>
      <input type="digit" value="{{inputHeight}}" placeholder="请输入身高" bindinput="onHeightInput"/>
    </view>
    <view class="action-buttons">
      <button class="submit-btn" bindtap="submitHealthRecord">提交记录</button>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="submit-btn" type="primary" bindtap="submitRecord">提交记录</button>
    <button class="add-test-btn" bindtap="addTestRecord">添加测试数据</button>
  </view>
</view>