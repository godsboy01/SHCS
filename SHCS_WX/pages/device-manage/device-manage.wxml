<!--pages/device-manage/device-manage.wxml-->
<navigation-bar 
  title="设备管理" 
  background="#4CAF50" 
  color="#ffffff"
  back="{{true}}"
/>

<view class="container">
  <!-- 设备列表 -->
  <view class="device-list">
    <view class="device-item" wx:for="{{devices}}" wx:key="device_id"
          bindtap="handleDeviceDetail" data-id="{{item.device_id}}">
      <view class="device-icon">
        <image src="/assets/icon/{{item.device_type}}.png" mode="aspectFit"/>
      </view>
      <view class="device-info">
        <view class="device-header">
          <text class="device-name">{{item.device_name}}</text>
          <view class="device-status {{item.status === 'online' ? 'online' : ''}}">
            <view class="status-dot"></view>
            {{item.status === 'online' ? '在线' : '离线'}}
          </view>
        </view>
        <view class="device-meta">
          <view class="meta-item">
            <image class="meta-icon" src="/assets/icon/type.png" />
            <text>{{item.typeText}}</text>
          </view>
          <view class="meta-item">
            <image class="meta-icon" src="/assets/icon/location.png" />
            <text>{{item.location}}</text>
          </view>
          <view class="meta-item">
            <image class="meta-icon" src="/assets/icon/ip.png" />
            <text>{{item.ip_address}}</text>
          </view>
        </view>
      </view>
      <view class="device-actions">
        <button class="action-btn edit" 
                catchtap="handleEditDevice" 
                data-id="{{item.device_id}}">编辑</button>
        <button class="action-btn delete" 
                catchtap="handleDeleteDevice" 
                data-id="{{item.device_id}}"
                data-name="{{item.device_name}}">删除</button>
      </view>
    </view>
  </view>

  <!-- 添加设备按钮 -->
  <view class="add-button" bindtap="handleAddDevice">
    <image class="add-icon" src="/assets/icon/add.png" />
    <text>添加设备</text>
  </view>
</view>