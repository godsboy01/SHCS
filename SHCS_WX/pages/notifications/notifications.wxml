<!-- pages/notifications/notifications.wxml -->
<view class="container">
  <!-- 顶部标签栏 -->
  <view class="tabs">
    <view class="tab {{activeTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">系统通知</view>
    <view class="tab {{activeTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">跌倒记录</view>
  </view>

  <!-- 系统通知列表 -->
  <view class="message-list" wx:if="{{activeTab === 0}}">
    <view class="message-item" wx:for="{{messages}}" wx:key="id" bindtap="viewDetail" data-id="{{item.id}}" data-type="message">
      <view class="message-content">
        <view class="message-title">{{item.title}}</view>
        <view class="message-text">{{item.content}}</view>
      </view>
      <view class="message-time">{{item.create_time}}</view>
    </view>
  </view>

  <!-- 跌倒记录列表 -->
  <view class="message-list" wx:if="{{activeTab === 1}}">
    <view class="message-item fall-record" wx:for="{{fallRecords}}" wx:key="record_id" bindtap="viewDetail" data-id="{{item.record_id}}" data-type="fall">
      <view class="message-content">
        <view class="message-title">跌倒检测</view>
        <view class="message-text">
          <text>检测时间：{{item.detection_time}}</text>
          <text>置信度：{{item.confidence}}</text>
        </view>
      </view>
      <view class="message-time">{{item.detection_time}}</view>
    </view>
  </view>

  <!-- 空状态提示 -->
  <view class="empty-state" wx:if="{{(activeTab === 0 && messages.length === 0) || (activeTab === 1 && fallRecords.length === 0)}}">
    <image class="empty-icon" src="/assets/icon/empty.png" mode="aspectFit"></image>
    <text class="empty-text">暂无{{activeTab === 0 ? '通知' : '跌倒记录'}}</text>
  </view>
</view>